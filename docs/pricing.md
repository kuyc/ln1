1. Назначение документа

Этот документ формально определяет логику ценообразования в проекте ln1.

Он задаёт:

источники цены;

правила расчёта;

допустимые изменения;

ограничения и стоп-условия.

Если поведение цены противоречит этому документу —
➡️ это критическая ошибка реализации.

2. Общие принципы ценообразования (НЕ НАРУШАЮТСЯ)

Цена всегда контролируема

Цена всегда ограничена лимитами

Цена никогда не меняется бесконтрольно

Автоматическая корректировка обратима

При сомнениях → ручное подтверждение

3. Источники цены

Начальная цена товара определяется одним из двух способов:

3.1 Цена из базы данных

Используется, если:

товар уже продавался;

есть история продаж;

данные считаются актуальными.

Источник:

Data Layer проекта ln1.

3.2 Цена от нейросети

Используется, если:

товар новый;

данных недостаточно;

требуется анализ рынка Playerok.

Нейросеть:

анализирует аналогичные товары;

учитывает спрос и конкуренцию;

предлагает цену, но не устанавливает её напрямую.

4. Роль Pricing Engine

Pricing Engine — единственный компонент,
имеющий право рассчитывать цену.

Он:

принимает входные данные;

применяет правила;

проверяет лимиты;

возвращает допустимую цену.

Ни один другой модуль не может менять цену напрямую.

5. Лимиты цены (ОБЯЗАТЕЛЬНЫ)

Для каждого товара определяются:

MIN_PRICE

MAX_PRICE

PRICE_STEP (шаг изменения)

Правила:

цена никогда не выходит за пределы;

шаг изменения фиксирован;

резкие скачки запрещены.

❌ Нарушение лимитов → ERROR

6. Изменение цены во времени
6.1 Где разрешено изменение цены

Изменение цены разрешено ТОЛЬКО в состоянии:

WAIT_FOR_SALE


В любых других состояниях:

изменение цены запрещено;

попытка изменения → ошибка.

6.2 Понижение цены

Цена может быть понижена, если:

товар долго не продаётся;

спрос низкий;

есть подтверждение аналитики.

Ограничения:

не чаще установленного интервала;

не более одного шага за раз;

не ниже MIN_PRICE.

6.3 Повышение цены

Цена может быть повышена, если:

наблюдается повышенный спрос;

есть быстрая продажа;

данные подтверждены.

Ограничения:

реже, чем понижение;

не более одного шага;

не выше MAX_PRICE.

7. Цена и режимы
7.1 Semi-Auto

цена рассчитывается один раз;

может корректироваться только вручную;

автоматическое изменение запрещено.

7.2 Auto

цена может корректироваться автоматически;

изменения проходят через Pricing Engine;

все изменения логируются;

лимиты обязательны.

8. Подтверждение администратора

Подтверждение требуется, если:

цена выходит за рекомендуемый диапазон;

система не уверена в данных;

товар новый и риск высокий.

Без подтверждения:

публикация запрещена.

9. Логирование и аудит цены

Логируется:

начальная цена;

каждая корректировка;

причина изменения;

режим работы.

Отсутствие логов → критическая ошибка.

10. Ошибки ценообразования

Любая ошибка:

останавливает Workflow;

переводит систему в ERROR;

требует ручного вмешательства.

11. Запрещённые паттерны (ЖЁСТКО)

❌ динамическая цена без лимитов

❌ частые изменения

❌ резкие скачки

❌ прямое влияние нейросети

❌ скрытые изменения от администратора

12. Финальное правило цены

Цена — это управляемый параметр,
а не автономное поведение системы.
