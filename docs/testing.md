1. Назначение документа

Этот документ определяет стратегию тестирования проекта ln1.

Цель тестирования:

предотвратить критические ошибки;

защитить аккаунт Playerok от банов;

обеспечить предсказуемое поведение Workflow;

гарантировать безопасность Auto режима.

Если функциональность не тестируема —
➡️ она не допускается в продакшен.

2. Базовые принципы тестирования (НЕ НАРУШАЮТСЯ)

Auto режим без тестов запрещён

Каждая ошибка воспроизводима

Критические сценарии проверяются вручную

Ошибка → остановка → анализ

Лучше остановить систему, чем продолжить с риском

3. Виды тестирования
3.1 Unit Tests

Назначение: проверка отдельных компонентов.

Тестируются:

Workflow Engine (переходы состояний);

Pricing Engine (расчёты и лимиты);

валидаторы данных;

правила режимов.

❌ Не тестируют:

Telegram UI;

реальные Playerok запросы;

нейросети.

3.2 Integration Tests

Назначение: проверка взаимодействия модулей.

Тестируются:

Workflow ↔ Pricing Engine;

Workflow ↔ Playerok Integration (через mock);

Workflow ↔ AI Services;

обработка ошибок API.

3.3 Manual Testing (ОБЯЗАТЕЛЬНО)

Назначение: проверка реального поведения системы.

Проверяется:

кнопки Telegram;

подтверждения администратора;

смена состояний Workflow;

Kill Switch;

уведомления об ошибках.

3.4 Safety & Risk Testing

Назначение: защита от банов и потерь.

Проверяется:

rate limit Playerok;

частота публикаций;

частота изменения цены;

повторяемость контента;

остановка Auto режима.

4. Критические сценарии (ОБЯЗАТЕЛЬНЫ)
4.1 Semi-Auto — успешный сценарий

Администратор запускает Workflow

Контент сгенерирован

Цена рассчитана

Администратор подтверждает

Товар опубликован

Происходит продажа

Заказ подтверждён

Workflow завершён (STOPPED)

4.2 Semi-Auto — отказ администратора

Администратор отклоняет подтверждение

Публикация не происходит

Workflow завершается корректно

4.3 Auto — базовый цикл

Администратор включает Auto

Первый цикл подтверждён

Продажа

Перевыставление

Корректировка цены

Повтор цикла

4.4 Ошибка Playerok API

ошибка публикации или подтверждения;

Workflow → ERROR;

Auto режим останавливается;

администратор уведомлён.

4.5 Ошибка нейросети

пустой или невалидный ответ;

Workflow → ERROR;

публикация запрещена.

4.6 Kill Switch

администратор нажимает остановку;

все Workflow прекращаются;

система переходит в STOPPED.

5. Что тестировать ЗАПРЕЩЕНО

«Редкие случаи»

«AI сам справится»

«Потом проверим»

«На проде посмотрим»

6. Баг-репорты (GitHub Issues)

Каждый баг обязан содержать:

краткое описание;

шаги воспроизведения;

ожидаемый результат;

фактический результат;

режим (Semi / Auto);

состояние Workflow;

логи (если есть).

Баг без шагов → не принимается.

7. Роли в тестировании
QA Expert

тест-стратегия;

контроль сценариев;

блокировка релизов.

Manual Tester

ручные проверки;

воспроизведение багов.

Developer

фиксы;

регрессионные проверки.

8. Auto режим — особые условия

Перед включением Auto режима:

Semi-Auto стабилен;

≥ 10 успешных продаж;

нет критических багов;

администратор подтверждает запуск.

9. Логирование для тестирования

Обязательно логируются:

состояния Workflow;

переходы;

ошибки;

изменения цены;

подтверждения администратора.

Без логов тестирование невозможно.

10. Критерии готовности к продакшену

все критические сценарии пройдены;

Auto режим протестирован;

Kill Switch проверен;

нет блокирующих багов;

документация актуальна.

11. Финальное правило тестирования

Auto режим без тестов — гарантированный провал.
Тестирование — часть безопасности.
