1. Назначение документа

Этот документ описывает стратегию тестирования Playerok AI Seller Bot и обязателен для:

QA Expert

Python Pro

Code Reviewer

всех тестировщиков проекта

Цель:

предотвратить регрессии;

выявлять ошибки до продакшена;

обеспечить стабильность Auto режима;

защитить аккаунты Playerok от банов.

2. Принципы тестирования (НЕ НАРУШАЮТСЯ)

Auto режим без тестов запрещён

Каждый баг воспроизводим

Каждый критический сценарий тестируется вручную

Ошибка > остановка > анализ

Лучше недотестировать фичу, чем сломать Workflow

3. Типы тестирования
3.1 Unit Tests

Цель: проверить отдельные функции.

Тестируются:

Pricing Engine (расчёты);

лимиты цены;

парсинг данных Playerok;

state machine Workflow.

❌ Не тестируют Telegram UI
❌ Не тестируют AI

3.2 Integration Tests

Цель: проверить взаимодействие модулей.

Тестируются:

Workflow → Pricing Engine;

Workflow → Playerok Integration;

Workflow → AI Content Service;

ошибки API.

⚠️ Playerok API — через mock, если возможно.

3.3 Manual QA (обязательный)

Цель: проверить реальные сценарии.

Проверяется:

кнопки Telegram;

подтверждения администратора;

остановка Workflow;

переходы состояний;

уведомления.

3.4 Safety & Risk Tests

Цель: защита от бана и потерь.

Проверяется:

rate limit;

частота публикаций;

частота изменения цены;

повторяющийся контент;

Kill Switch.

4. Критические сценарии (ОБЯЗАТЕЛЬНЫ)
4.1 Semi-Auto (happy path)

Админ нажал кнопку

Контент сгенерирован

Админ подтвердил

Товар опубликован

Произошла покупка

Заказ подтверждён

Workflow остановлен

4.2 Semi-Auto (отказ)

Админ отклонил подтверждение

Ничего не опубликовано

Workflow завершён

4.3 Auto (happy path)

Админ включил Auto

Первый запуск подтверждён

Продажа

Перевыставление

Корректировка цены

Повтор цикла

4.4 Ошибка Playerok API

Ошибка публикации

Workflow остановлен

Админ уведомлён

4.5 Ошибка AI

Пустой ответ

Невалидный формат

Workflow остановлен

Админ уведомлён

4.6 Аварийная остановка

Админ нажал Kill Switch

Все Workflow остановлены

Auto режим выключен

5. Что тестировать ЗАПРЕЩЕНО

«Как-нибудь работает»

«Редкий кейс»

«Потом проверим»

«AI сам разберётся»

6. Требования к баг-репортам (GitHub Issues)

Каждый баг ОБЯЗАТЕЛЬНО содержит:

краткое описание;

шаги воспроизведения;

ожидаемое поведение;

фактическое поведение;

режим (Semi / Auto);

логи (если есть);

версию коммита.

❌ Баг без шагов = не баг.

7. Процесс работы тестировщиков
Роли:

QA Expert — стратегия и контроль

Manual Tester — сценарии

Integration Tester — API и Workflow

GitHub Maintainer — merge / issues

Поток:
Фича готова
 ↓
QA сценарии
 ↓
Ручная проверка
 ↓
Баги → GitHub Issues
 ↓
Фикс
 ↓
Повторное тестирование
 ↓
Merge

8. Auto режим — особые правила

Перед включением Auto:

Semi-Auto должен быть стабилен

≥ 10 успешных продаж

0 критических багов

ручное подтверждение админа

9. Логирование для тестов

Тестировщик должен видеть:

шаги Workflow;

состояния;

причины остановки;

изменения цены.

Если лога нет — тест невозможен.

10. Критерии готовности к продакшену

все критические сценарии пройдены;

нет блокирующих багов;

Kill Switch проверен;

админ уведомления работают;

Auto режим включается осознанно.

11. Финальное правило

Auto режим без тестов = гарантированный фейл.
